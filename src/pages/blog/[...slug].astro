---
import BlogPostPage from '../../components/Blog/PostPage.astro';
import { blogPostsContent, blogPostsContentMap } from '../../data/blogs/content';

export async function getStaticPaths() {
  return blogPostsContent.map((post) => ({
    params: {
      slug: post.slugSegments.join('/')
    }
  }));
}

const slugParam = Astro.params.slug;
const slugKey =
  typeof slugParam === 'string'
    ? slugParam
    : Array.isArray(slugParam)
      ? slugParam.join('/')
      : '';
const postEntry = blogPostsContentMap[slugKey];

if (!postEntry) {
  throw new Error(`Blog post not found for slug: ${slugKey}`);
}
---

<BlogPostPage postEntry={postEntry} slugKey={slugKey} />

