---
interface BenefitIconImage {
  src: string;
  alt: string;
  className: string;
}

interface Benefit {
  id: string;
  title: string;
  description: string;
  iconGradient?: string;
  iconImages: BenefitIconImage[];
  iconType?: "svg" | "image";
  iconSrc?: string;
  result?: string;
}

interface ProcessedBenefit extends Benefit {
  descriptionHtml: string;
}

interface Props {
  titleLeading?: string;
  titleHighlight?: string;
  benefits?: Benefit[];
}

const defaultBenefits: Benefit[] = [
  {
    id: "reduce-costs",
    title: "Reduce Staffing Costs by 60%",
    description:
      "Eliminate the need for additional phone staff while maintaining or improving customer service quality. One Voice AI Agent can handle hundreds of calls simultaneously.",
    iconGradient: "",
    iconImages: [],
    iconType: "image",
    iconSrc: "/img/icon-benefit-reduce-costs.svg"
  },
  {
    id: "never-miss",
    title: "Never Miss a Customer Call",
    description:
      "Every call is answered immediately, even during peak hours or after business hours. Capture every lead and opportunity that comes your way.",
    iconGradient: "",
    iconImages: [],
    iconType: "image",
    iconSrc: "/img/icon-benefit-never-miss-call.svg"
  },
  {
    id: "multiple-calls",
    title: "Handle Multiple Calls Simultaneously",
    description:
      "Scale your customer service without scaling your staff. Your AI agent can handle unlimited concurrent calls without any degradation in service quality.",
    iconGradient: "",
    iconImages: [],
    iconType: "image",
    iconSrc: "/img/icon-benefit-multiple-calls.svg"
  },
  {
    id: "customer-satisfaction",
    title: "Improve Customer Satisfaction",
    description:
      "Provide instant, accurate responses to customer inquiries, leading to higher satisfaction scores and increased customer loyalty.",
    iconGradient: "",
    iconImages: [],
    iconType: "image",
    iconSrc: "/img/icon-benefit-customer-satisfaction.svg"
  }
];

const {
  titleLeading = "Benefits for",
  titleHighlight = "Your Business",
  benefits = defaultBenefits
} = Astro.props as Props;

const gradientPalette = [
  "bg-[linear-gradient(135deg,#60a5fa_0%,#8b5cf6_100%)]",
  "bg-[linear-gradient(135deg,#34d399_0%,#10b981_100%)]",
  "bg-[linear-gradient(135deg,#f472b6_0%,#ec4899_100%)]",
  "bg-[linear-gradient(135deg,#f59e0b_0%,#f97316_100%)]",
  "bg-[linear-gradient(135deg,#22d3ee_0%,#06b6d4_100%)]",
  "bg-[linear-gradient(135deg,#a855f7_0%,#7c3aed_100%)]"
];

const resolveGradient = (benefit: Benefit, index: number) =>
  benefit.iconGradient && benefit.iconGradient.trim() !== ""
    ? benefit.iconGradient
    : gradientPalette[index % gradientPalette.length];

const processedBenefits: ProcessedBenefit[] = benefits.map((benefit) => ({
  ...benefit,
  descriptionHtml: benefit.description.replace(/\n/g, "<br />")
}));
---

<section class="relative mx-auto mt-24 max-w-6xl px-6 py-20">
  <header class="flex flex-col items-center gap-4 text-center">
    <h2 class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] text-3xl font-semibold leading-tight text-white sm:text-4xl md:text-[48px] md:leading-[58px]">
      <span>{titleLeading} </span>
      <span class="text-transparent bg-clip-text bg-[linear-gradient(90deg,#60a5fa_0%,#8b5cf6_100%)]">
        {titleHighlight}
      </span>
    </h2>
  </header>

  <div class="mt-12 grid grid-cols-1 gap-8 sm:grid-cols-2">
    {processedBenefits.map((benefit, index) => (
      <article class="relative flex flex-col sm:flex-row rounded-[24px] border border-solid border-[#ffffff14] bg-[linear-gradient(180deg,rgba(31,32,45,0.9)_0%,rgba(16,17,26,0.9)_100%)] px-8 py-6 shadow-[0px_20px_45px_rgba(10,10,15,0.45)]">
        <div class={`flex h-[60px] w-[60px] shrink-0 items-center justify-center overflow-hidden rounded-2xl ${resolveGradient(benefit, index)} p-2 shadow-[0_20px_45px_rgba(8,14,35,0.35)]`}>
          {benefit.iconType === "image" ? (
            <img class="h-full w-full rounded-[18px] object-cover" alt={benefit.title} src={benefit.iconSrc} />
          ) : (
            <div class={`flex h-full w-full items-center justify-center rounded-[18px] ${resolveGradient(benefit, index)}`}>
              <div class="relative h-8 w-8">
                {benefit.iconImages.map((icon) => (
                  <img class={icon.className} alt={icon.alt} src={icon.src} />
                ))}
              </div>
            </div>
          )}
        </div>

        <div class="mt-4 sm:mt-0 sm:ml-6 flex flex-col">
          <h3 class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-semibold text-2xl text-white tracking-[0] leading-8">
            {benefit.title}
          </h3>

          <p
            class="mt-3 [font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#b5bdc8] text-base tracking-[0] leading-7"
            set:html={benefit.descriptionHtml}
          />
        </div>
      </article>
    ))}
  </div>
</section>

<style is:global>
  /* Styles injected for BenefitsSection */
</style>

