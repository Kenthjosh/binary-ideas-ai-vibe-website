---
interface ServiceIcon {
  type: "gradient" | "image";
  gradient?: string;
  images?: { src: string; alt: string; className: string }[];
  imageSrc?: string;
}

interface Service {
  icon: ServiceIcon;
  title: string;
  description: string;
  learnMoreGradient: string;
  link?: string;
  linkText?: string;
}

interface Props {
  subtitle?: string;
  services?: Service[];
}

const {
  subtitle = "Every AI solution we build is designed to solve a specific, expensive problem in your business",
  services = [
    {
      icon: {
        type: "image",
        imageSrc: "/img/Voice AI Agents.svg",
      },
      title: "Voice AI Agents",
      description:
        "<strong>THE PROBLEM:</strong> Missing 20+ calls daily costs you $3,000-$7,000 monthly\n\nYour AI receptionist answers every call instantly, schedules appointments, qualifies leads, and handles customer inquiries 24/7 — in a voice that sounds completely human. Never miss revenue again.",
      learnMoreGradient: "linear-gradient(90deg,rgba(43,127,255,1)_0%,rgba(0,184,219,1)_100%)",
      link: "/services/voice-ai-agents",
      linkText: "See How It Stops Missed Calls",
    },
    {
      icon: {
        type: "image",
        imageSrc: "/img/Lead Generation AI.svg",
      },
      title: "Lead Generation AI",
      description:
        "<strong>THE PROBLEM:</strong> 70% of website visitors leave without converting\n\nTurn your website into a lead-capturing machine. Our AI identifies high-intent visitors, engages them instantly, and automatically qualifies and routes prospects — increasing conversions by 300%.",
      learnMoreGradient: "linear-gradient(90deg,rgba(173,70,255,1)_0%,rgba(246,51,154,1)_100%)",
      link: "/services/lead-generation-ai",
      linkText: "Stop Losing Website Visitors",
    },
    {
      icon: {
        type: "image",
        imageSrc: "/img/Email Marketing AI.svg",
      },
      title: "Email Marketing AI",
      description:
        "<strong>THE PROBLEM:</strong> 10+ hours weekly on email, 18% open rates\n\nStop spending your weekends writing emails nobody opens. AI creates personalized campaigns, optimizes send times, and increases open rates by 40% while giving you back 10+ hours weekly.",
      learnMoreGradient: "linear-gradient(90deg,rgba(246,51,154,1)_0%,rgba(255,32,86,1)_100%)",
      link: "/services/email-marketing-ai",
      linkText: "Automate Your Email Marketing",
    },
    {
      icon: {
        type: "image",
        imageSrc: "/img/Chatbot AI.svg",
      },
      title: "Chatbot AI",
      description:
        "<strong>THE PROBLEM:</strong> Support tickets pile up, customers wait hours\n\nGive customers instant answers 24/7. AI chatbots reduce support tickets by 70%, answer FAQs immediately, and escalate only complex issues — freeing your team to focus on high-value work.",
      learnMoreGradient: "linear-gradient(90deg,rgba(0,184,219,1)_0%,rgba(43,127,255,1)_100%)",
      link: "/services/chatbot-ai",
      linkText: "Eliminate Support Backlogs",
    },
    {
      icon: {
        type: "image",
        imageSrc: "/img/Social Media AI.svg",
      },
      title: "Social Media AI",
      description:
        "<strong>THE PROBLEM:</strong> 15+ weekly hours creating content, inconsistent posting\n\nMaintain a consistent social presence without the time drain. AI creates, schedules, and optimizes posts across all platforms, increasing engagement by 50% while saving 15+ hours weekly.",
      learnMoreGradient: "linear-gradient(90deg,rgba(142,81,255,1)_0%,rgba(173,70,255,1)_100%)",
      link: "/services/social-media-ai",
      linkText: "Automate Social Media",
    },
    {
      icon: {
        type: "image",
        imageSrc: "/img/icons-custom-ai-agent.png",
      },
      title: "Custom Training Agents",
      description:
        "<strong>THE PROBLEM:</strong> Your workflows are unique, generic AI won't cut it\n\nHave a unique process that needs automation? We build and train custom AI agents specifically for your workflows, giving you a competitive advantage no off-the-shelf solution can match.",
      learnMoreGradient: "linear-gradient(90deg,rgba(225,42,251,1)_0%,rgba(246,51,154,1)_100%)",
      link: "/services/training-agents",
      linkText: "Get Custom Automation",
    },
  ]
} = Astro.props;

const topRowServices = services.slice(0, 3);
const bottomRowServices = services.slice(3, 6);
---

<section id="services" class="relative w-full px-4 md:px-8 lg:px-20 py-20 md:py-32">
  <h2 class="text-3xl md:text-4xl lg:text-5xl font-normal text-center mb-6 [font-family:'Segoe_UI_Symbol-Regular',Helvetica]">
    <span class="text-white">Which Problem </span>
    <span class="bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">Do You Need Solved First?</span>
  </h2>

  <p class="max-w-3xl mx-auto [font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#99a1ae] text-base md:text-lg text-center tracking-[0] leading-7 mb-12">
    {subtitle}
  </p>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
  {topRowServices.map((service, index) => (
    <article
      class="p-8 flex flex-col bg-[#fffefe0d] rounded-2xl overflow-hidden border-[#fffefe1a] border border-solid backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)]"
    >
      {service.icon.type === "gradient" ? (
        <div
          class="relative w-16 h-16 flex items-center justify-center rounded-[14px] overflow-hidden shadow-[0px_4px_6px_-4px_#0000001a,0px_10px_15px_-3px_#0000001a] mb-4"
          style={`background: ${service.icon.gradient}`}
        >
          <div class="relative w-10 h-10 md:w-12 md:h-12">
            {service.icon.images?.map((img) => (
              <img
                class={img.className}
                alt={img.alt}
                src={img.src}
              />
            ))}
          </div>
        </div>
      ) : (
        <img
          class="w-16 h-16 mb-4"
          alt="Background shadow"
          src={service.icon.imageSrc}
        />
      )}

      <h3 class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-white text-2xl tracking-[0] leading-8 mb-4">
        {service.title}
      </h3>

      <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#99a1ae] text-base tracking-[0] leading-[26px] mb-6 flex-grow" set:html={service.description.split('\n').join('<br />')} />

      <a
        href={service.link || "#"}
        class="flex items-center gap-2 mt-auto group"
        aria-label={`Learn more about ${service.title}`}
      >
        <span
          class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-sm tracking-[0] leading-5 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent group-hover:opacity-80 transition-opacity"
        >
          {service.linkText || "Learn More"}
        </span>

        <img
          class="w-4 h-4 group-hover:translate-x-1 transition-transform"
          alt="Arrow"
          src="/img/vector-18.svg"
        />
      </a>
    </article>
  ))}

  {bottomRowServices.map((service, index) => (
    <article
      class="p-8 flex flex-col bg-[#fffefe0d] rounded-2xl overflow-hidden border-[#fffefe1a] border border-solid backdrop-blur-sm backdrop-brightness-[100%] [-webkit-backdrop-filter:blur(4px)_brightness(100%)]"
    >
      {service.icon.type === "gradient" ? (
        <div
          class="relative w-16 h-16 flex items-center justify-center rounded-[14px] overflow-hidden shadow-[0px_4px_6px_-4px_#0000001a,0px_10px_15px_-3px_#0000001a] mb-4"
          style={`background: ${service.icon.gradient}`}
        >
          <div class="relative w-10 h-10 md:w-12 md:h-12">
            {service.icon.images?.map((img) => (
              <img
                class={img.className}
                alt={img.alt}
                src={img.src}
              />
            ))}
          </div>
        </div>
      ) : (
        <img
          class="w-16 h-16 mb-4"
          alt="Background shadow"
          src={service.icon.imageSrc}
        />
      )}

      <h3 class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-white text-2xl tracking-[0] leading-8 mb-4">
        {service.title}
      </h3>

      <p class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-[#99a1ae] text-base tracking-[0] leading-[26px] mb-6 flex-grow" set:html={service.description.split('\n').join('<br />')} />

      <a
        href={service.link || "#"}
        class="flex items-center gap-2 mt-auto group"
        aria-label={`Learn more about ${service.title}`}
      >
        <span
          class="[font-family:'Segoe_UI_Symbol-Regular',Helvetica] font-normal text-sm tracking-[0] leading-5 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent group-hover:opacity-80 transition-opacity"
        >
          {service.linkText || "Learn More"}
        </span>

        <img
          class="w-4 h-4 group-hover:translate-x-1 transition-transform"
          alt="Arrow"
          src="/img/vector-18.svg"
        />
      </a>
    </article>
  ))}
  </div>
</section>
